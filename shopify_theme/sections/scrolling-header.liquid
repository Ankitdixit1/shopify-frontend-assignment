<div class="app color-{{ section.settings.color_scheme }}">
  <div class="sldfjsk">
    <div class="loop-slider" style="--duration:15951ms; --direction:normal;">
      <div class="inner">
        {%  for block in section.blocks %}
          <div class="tag">
            <img
              src="{{ block.settings.icon | image_url: 'master' }}"
              alt="{{ block.settings.icon.alt | escape }}"
              class="tag-image"
            >
            {{ block.settings.offer_text | escape }}
          </div>
        {% endfor %}
        {%  for block in section.blocks %}
          <div class="tag">
            <img
              src="{{ block.settings.icon | image_url: 'master' }}"
              alt="{{ block.settings.icon.alt | escape }}"
              class="tag-image"
            >
            {{ block.settings.offer_text | escape }}
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
{%  style  %}
  .app {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }


  .sldfjsk {
    width: 100%;
    display: flex;
    flex-shrink: 0;
    flex-direction: column;
    gap: 1rem 0;
    position: relative;
    /* padding: 1.5rem 0; */
    overflow: hidden;
  }

  .loop-slider {
    background-color: rgba(var(--color-button),var(--alpha-button-background));
    width: 100%;
  }

  .loop-slider .inner {
    display: flex;
    width: fit-content;
    white-space: nowrap; /* Prevent wrapping */
    animation-name: loop;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-direction: var(--direction);
    animation-duration: {{ section.settings.duration_s | times: 1000 }}ms;
  }

  .tag {
    height:36px;
    display: inline-flex; /* Ensures items stay in a single line */
    align-items: center;
    gap: 0 0.2rem;
    /* color: #000; */
    font-size: 12px;
    border-radius: 0.4rem;
    /* padding: 0.7rem 1rem; */
    margin-right: 1rem; /* Use margin-right instead of gap for smooth looping */
  }

  .fade {
    pointer-events: none;
    background: linear-gradient(90deg, #1e293b, transparent 30%, transparent 70%, #1e293b);
    position: absolute;
    inset: 0;
  }

  @keyframes loop {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-50%);
    }
  }
{% endstyle %}
{% schema %}
{
  "name": "Marquee Announcement",
    "class": "announcement-bar-section",
  "settings": [
    {
      "type": "range",
      "id": "duration_s",
      "min": 30,
      "max": 60,
      "step": 1,
      "unit": "s",
      "label": "Animation duration",
      "default": 40
    },{
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "scheme-4",
      "label": "color_scheme"
    }
    ],
  "blocks": [
    {
      "type": "offer",
      "name": "Offer Block",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icon"
        },
        {
          "type": "text",
          "id": "offer_text",
          "label": "Offer Text",
          "default": "Free Shipping on Orders Over $50"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Marquee Announcement",
      "category": "Custom"
    }
  ]
}
{% endschema %}